<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabæ•°æ®æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .tool-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .tool-card-meta {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #e0e0e0;
        }
        
        .tool-card-meta-tabs {
            display: flex;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 12px;
        }
        
        .tool-card-meta-tabs.single-tab .tool-card-meta-tab {
            border-bottom: 2px solid #393939;
            color: #393939;
        }
        
        .tool-card-meta-tab {
            padding: 6px 12px;
            font-size: 11px;
            font-weight: 500;
            color: #6c757d;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 4px;
            flex: 1;
            justify-content: center;
        }
        
        .tool-card-meta-tab:hover {
            color: #333;
            background: rgba(57, 57, 57, 0.04);
        }
        
        .tool-card-meta-tab.active {
            color: #393939;
            border-bottom-color: #393939;
        }
        
        .tool-card-meta-tab.scenarios-tab.active {
            color: #393939;
            border-bottom-color: #393939;
        }
        
        .tool-card-meta-tab.limitations-tab.active {
            color: #dc3545;
            border-bottom-color: #dc3545;
        }
        
        .tool-card-meta-content {
            min-height: 40px;
        }
        
        .tool-card-meta-panel {
            display: none;
        }
        
        .tool-card-meta-panel.active {
            display: block;
        }
        
        .tool-card-meta-list {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }
        
        .tool-card-meta-item {
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 3px;
            background: #f8f9fa;
            color: #6c757d;
            border: 1px solid #dee2e6;
            transition: all 0.2s ease;
            line-height: 1.3;
        }
        
        .tool-card-meta-panel.scenarios .tool-card-meta-item {
            background: rgba(57, 57, 57, 0.06);
            color: #333;
            border-color: rgba(57, 57, 57, 0.12);
        }
        
        .tool-card-meta-panel.limitations .tool-card-meta-item {
            background: rgba(220, 53, 69, 0.06);
            color: #dc3545;
            border-color: rgba(220, 53, 69, 0.12);
        }
        
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Tabæ•°æ®æµ‹è¯•</h1>
        
        <div class="debug-info" id="debug-info">
            è°ƒè¯•ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
        </div>
        
        <div class="tool-card">
            <h3>æµ‹è¯•å·¥å…·1 - åªæœ‰ä½¿ç”¨åœºæ™¯</h3>
            <div id="tool1-meta"></div>
        </div>
        
        <div class="tool-card">
            <h3>æµ‹è¯•å·¥å…·2 - åªæœ‰ä½¿ç”¨é™åˆ¶</h3>
            <div id="tool2-meta"></div>
        </div>
        
        <div class="tool-card">
            <h3>æµ‹è¯•å·¥å…·3 - ä¸¤è€…éƒ½æœ‰</h3>
            <div id="tool3-meta"></div>
        </div>
    </div>

    <script>
        // æµ‹è¯•æ•°æ®
        const testTools = [
            {
                id: 'tool1',
                scenarios: ['æ•°æ®åˆ†æ', 'æŠ¥è¡¨ç”Ÿæˆ', 'æ•°æ®æ¸…æ´—'],
                limitations: []
            },
            {
                id: 'tool2', 
                scenarios: [],
                limitations: ['éœ€è¦APIå¯†é’¥', 'ä»…æ”¯æŒCSVæ ¼å¼', 'æœ€å¤§10MB']
            },
            {
                id: 'tool3',
                scenarios: ['æ–‡æœ¬å¤„ç†', 'æ•°æ®åˆ†æ', 'æŠ¥è¡¨ç”Ÿæˆ'],
                limitations: ['éœ€è¦APIå¯†é’¥', 'ä»…æ”¯æŒCSVæ ¼å¼']
            }
        ];
        
        // ç”Ÿæˆmeta HTMLçš„å‡½æ•°
        function generateMetaHtml(tool) {
            const debugInfo = document.getElementById('debug-info');
            
            let debugText = `Tool ${tool.id}:\n`;
            debugText += `- scenarios.length: ${tool.scenarios.length}\n`;
            debugText += `- scenarios: [${tool.scenarios.join(', ')}]\n`;
            debugText += `- limitations.length: ${tool.limitations.length}\n`;
            debugText += `- limitations: [${tool.limitations.join(', ')}]\n`;
            debugText += `- !tool.limitations: ${!tool.limitations}\n`;
            debugText += `- tool.limitations.length === 0: ${tool.limitations.length === 0}\n`;
            debugText += `- should scenarios be active: ${!tool.limitations || tool.limitations.length === 0}\n`;
            debugInfo.innerHTML += `<pre>${debugText}</pre>`;
            
            const metaHtml = (tool.scenarios && tool.scenarios.length > 0) || (tool.limitations && tool.limitations.length > 0) ? `
                <div class="tool-card-meta">
                    <div class="tool-card-meta-tabs ${(tool.scenarios && tool.scenarios.length > 0 && tool.limitations && tool.limitations.length > 0) ? '' : 'single-tab ' + 
                        (tool.scenarios && tool.scenarios.length > 0 ? 'scenarios-only' : 'limitations-only')}">
                        ${tool.scenarios && tool.scenarios.length > 0 ? `
                            <button class="tool-card-meta-tab scenarios-tab ${!tool.limitations || tool.limitations.length === 0 ? 'active' : ''}" 
                                    onclick="switchMetaTab('${tool.id}', 'scenarios')">
                                ğŸ¯ ä½¿ç”¨åœºæ™¯
                            </button>
                        ` : ''}
                        ${tool.limitations && tool.limitations.length > 0 ? `
                            <button class="tool-card-meta-tab limitations-tab ${!tool.scenarios || tool.scenarios.length === 0 ? 'active' : ''}" 
                                    onclick="switchMetaTab('${tool.id}', 'limitations')">
                                âš ï¸ ä½¿ç”¨é™åˆ¶
                            </button>
                        ` : ''}
                    </div>
                    <div class="tool-card-meta-content">
                        ${tool.scenarios && tool.scenarios.length > 0 ? `
                            <div class="tool-card-meta-panel scenarios ${!tool.limitations || tool.limitations.length === 0 ? 'active' : ''}" id="meta-scenarios-${tool.id}">
                                <div class="tool-card-meta-list">
                                    ${tool.scenarios.map(scenario => `<span class="tool-card-meta-item">${scenario}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}
                        ${tool.limitations && tool.limitations.length > 0 ? `
                            <div class="tool-card-meta-panel limitations ${!tool.scenarios || tool.scenarios.length === 0 ? 'active' : ''}" id="meta-limitations-${tool.id}">
                                <div class="tool-card-meta-list">
                                    ${tool.limitations.map(limitation => `<span class="tool-card-meta-item">${limitation}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            ` : '';
            
            return metaHtml;
        }
        
        // åˆ‡æ¢tabå‡½æ•°
        function switchMetaTab(toolId, tabType) {
            const tabsContainer = document.querySelector(`#tool${toolId.replace('tool', '')}-meta .tool-card-meta-tabs`);
            const panelsContainer = document.querySelector(`#tool${toolId.replace('tool', '')}-meta .tool-card-meta-content`);
            
            if (!tabsContainer || !panelsContainer) return;
            
            // åˆ‡æ¢tabçŠ¶æ€
            const tabs = tabsContainer.querySelectorAll('.tool-card-meta-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.classList.contains(`${tabType}-tab`)) {
                    tab.classList.add('active');
                }
            });
            
            // åˆ‡æ¢é¢æ¿çŠ¶æ€
            const panels = panelsContainer.querySelectorAll('.tool-card-meta-panel');
            panels.forEach(panel => {
                panel.classList.remove('active');
                if (panel.classList.contains(tabType)) {
                    panel.classList.add('active');
                }
            });
        }
        
        // æ¸²æŸ“æµ‹è¯•å·¥å…·
        testTools.forEach(tool => {
            const container = document.getElementById(`${tool.id}-meta`);
            container.innerHTML = generateMetaHtml(tool);
        });
        
        // æš´éœ²åˆ°å…¨å±€
        window.switchMetaTab = switchMetaTab;
    </script>
</body>
</html>